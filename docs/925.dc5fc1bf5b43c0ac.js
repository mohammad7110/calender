"use strict";(self.webpackChunkcalendly=self.webpackChunkcalendly||[]).push([[925],{1925:(E,g,p)=>{p.r(g),p.d(g,{AppointmentModule:()=>I});var x=p(6814),u=p(3403),t=p(5879),Z=p(3365),r=p(6223),s=p(9962),v=p(7398),y=p(3320),M=p(3433),_=p(9157),T=p(4913),P=p(3680),b=p(2296),S=p(1175),w=p(2032),A=p(8034),C=p(6381);function G(n,c){if(1&n&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&n){const o=c.$implicit;t.Q6J("value",o.value),t.xp6(1),t.Oqu(o.key)}}function U(n,c){if(1&n&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&n){const o=c.$implicit;t.Q6J("value",o.start),t.xp6(1),t.hij(" ",o.start," ")}}function J(n,c){if(1&n&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&n){const o=c.$implicit;t.Q6J("value",o.start),t.xp6(1),t.hij(" ",o.start," ")}}let B=(()=>{class n{constructor(o,e,a,f,d){this.formBuilder=o,this.appointmentService=e,this.router=a,this.route=f,this.eventService=d,this.durationOptions=[{key:"30 minutes",value:.5},{key:"1 hour",value:1},{key:"1.5 hour",value:1.5},{key:"2 hours",value:2}],this.startOptions=[],this.endOptions=[],this.formGroup=new r.cw({}),this.route.paramMap.pipe((0,v.U)(i=>i?.get("id")??""),(0,v.U)(i=>this.appointmentService.getAppointmentById(i))).subscribe(i=>{this.formGroup=this.formBuilder.group({id:[i?i.id:this.appointmentService.createRandomString()],title:[i?i.title:"",[r.kI.required]],duration:[i?i.duration:1,[r.kI.required]],day:[i?new Date(i.day):new Date,[r.kI.required]],start:[i?i.start:s.f[5].start,[r.kI.required]],end:[i?i.end:s.f[7].start,[r.kI.required]]},{validators:this.checkTimePeriod}),this.startOptions=[...s.f],this.endOptions=[...s.f],this.formGroup.get("start")?.valueChanges.subscribe(l=>{this.startOptions=l&&l.trim().length>0?[...s.f].filter(m=>m.start.toLowerCase().indexOf(l.toLowerCase())>=0):[...s.f]}),this.formGroup.get("end")?.valueChanges.subscribe(l=>{this.endOptions=l&&l.trim().length>0?[...s.f].filter(m=>m.start.toLowerCase().indexOf(l.toLowerCase())>=0):[...s.f]}),this.formGroup.valueChanges.subscribe(()=>{this.addAppointment()})}),this.eventService.event.appointments.subscribe(i=>{const l=this.formGroup.get("id")?.value;if(l){const m=i.find(h=>h.id===l);if(m){const h={...m,day:new Date(m.day)};this.formGroup.patchValue(h,{emitEvent:!1})}}})}checkTimePeriod(o){const e=o.get("start"),a=o.get("end");e&&a&&e.value&&a.value&&e.value>=a.value&&a.setErrors({notEquivalent:!0})}filter(o){const e=new RegExp("^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$");"start"===o&&this.formGroup&&!e.test(this.formGroup.get("start")?.value)&&this.formGroup.get("start")?.patchValue(s.f[5].start),"end"===o&&this.formGroup&&!e.test(this.formGroup.get("end")?.value)&&this.formGroup.get("end")?.patchValue(s.f[7].start)}addAppointment(){if(this.formGroup){const o=new RegExp("^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$"),e={...this.formGroup.value,day:this.formGroup.value.day.getTime(),save:!1};e.start&&e.end&&e.start<e.end&&o.test(e.start)&&o.test(e.end)&&this.appointmentService.addAppointment(e)}}save(){this.appointmentService.saveAppointment(),this.router.navigate([""]).then()}close(){this.appointmentService.discardAppointment(),this.router.navigate([""]).then()}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(y.H),t.Y36(u.F0),t.Y36(u.gz),t.Y36(M.P))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment-left-side-bar"]],decls:43,vars:8,consts:[[1,"app-appointment-left-side-bar"],[1,"app-appointment-left-side-bar__box"],[1,"app-appointment-left-side-bar__box--action"],["mat-icon-button","",3,"click"],["aria-hidden","false","aria-label","Example home icon","fontIcon","close"],[1,"app-appointment-left-side-bar__box--content",3,"formGroup"],[1,"app-appointment-left-side-bar__box--content__title"],["appearance","outline"],["matInput","","type","text","formControlName","title"],[1,"separator"],[1,"app-appointment-left-side-bar__box--content__sub-title"],["formControlName","duration"],[3,"value",4,"ngFor","ngForOf"],[1,"app-appointment-left-side-bar__box--content__date"],["matInput","","formControlName","day",3,"matDatepicker","click"],["picker",""],["matInput","","formControlName","start",3,"matAutocomplete","focusout"],["autoActiveFirstOption",""],["startAuto","matAutocomplete"],["matInput","","formControlName","end",3,"matAutocomplete","focusout"],["endAuto","matAutocomplete"],[1,"app-appointment-left-side-bar__box--footer"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,a){if(1&e){const f=t.EpF();t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"button",3),t.NdJ("click",function(){return a.close()}),t._UZ(4,"mat-icon",4),t.qZA()(),t.TgZ(5,"div",5)(6,"p",6),t._uU(7,"BOOKABLE APPOINTMENT SCHEDULE "),t.qZA(),t.TgZ(8,"mat-form-field",7)(9,"mat-label"),t._uU(10,"Add title"),t.qZA(),t._UZ(11,"input",8),t.qZA(),t._UZ(12,"hr",9),t.TgZ(13,"p",6),t._uU(14,"Appointment duration "),t.qZA(),t.TgZ(15,"p",10),t._uU(16,"How long should each appointment last? "),t.qZA(),t.TgZ(17,"mat-select",11),t.YNc(18,G,2,2,"mat-option",12),t.qZA(),t._UZ(19,"hr",9),t.TgZ(20,"p",6),t._uU(21,"Availability "),t.qZA(),t.TgZ(22,"p",10),t._uU(23,"Set when you're available for appointments. "),t.qZA(),t.TgZ(24,"div",13)(25,"mat-form-field")(26,"input",14),t.NdJ("click",function(){t.CHM(f);const i=t.MAs(28);return t.KtG(i.open())}),t.qZA(),t._UZ(27,"mat-datepicker",null,15),t.qZA(),t.TgZ(29,"mat-form-field")(30,"input",16),t.NdJ("focusout",function(){return a.filter("start")}),t.qZA(),t.TgZ(31,"mat-autocomplete",17,18),t.YNc(33,U,2,2,"mat-option",12),t.qZA()(),t._uU(34," - "),t.TgZ(35,"mat-form-field")(36,"input",19),t.NdJ("focusout",function(){return a.filter("end")}),t.qZA(),t.TgZ(37,"mat-autocomplete",17,20),t.YNc(39,J,2,2,"mat-option",12),t.qZA()()()(),t.TgZ(40,"div",21)(41,"button",22),t.NdJ("click",function(){return a.save()}),t._uU(42,"Save"),t.qZA()()()()}if(2&e){const f=t.MAs(28),d=t.MAs(32),i=t.MAs(38);t.xp6(5),t.Q6J("formGroup",a.formGroup),t.xp6(13),t.Q6J("ngForOf",a.durationOptions),t.xp6(8),t.Q6J("matDatepicker",f),t.xp6(4),t.Q6J("matAutocomplete",d),t.xp6(3),t.Q6J("ngForOf",a.startOptions),t.xp6(3),t.Q6J("matAutocomplete",i),t.xp6(3),t.Q6J("ngForOf",a.endOptions),t.xp6(2),t.Q6J("disabled",!a.formGroup.valid)}},dependencies:[x.sg,r.Fj,r.JJ,r.JL,r.sg,r.u,_.KE,_.hX,T.gD,P.ey,b.lW,b.RK,S.Hw,w.Nt,A.Mq,A.hl,C.XC,C.ZL],styles:[".app-appointment-left-side-bar[_ngcontent-%COMP%]{height:100vh;padding:10px;overflow:hidden;box-sizing:border-box}.app-appointment-left-side-bar__box[_ngcontent-%COMP%]{box-shadow:0 24px 38px 3px #00000024,0 9px 46px 8px #0000001f,0 11px 15px -7px #0003;border-radius:8px;height:100%;overflow-x:hidden;display:flex;flex-direction:column;overflow-y:hidden}.app-appointment-left-side-bar__box--action[_ngcontent-%COMP%]{padding:5px;display:flex;justify-content:flex-end}.app-appointment-left-side-bar__box--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px;color:#5f6368;line-height:28px;padding:0;font-size:20px}.app-appointment-left-side-bar__box--action[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{height:inherit;width:inherit;font-size:inherit;line-height:inherit}.app-appointment-left-side-bar__box--content[_ngcontent-%COMP%]{box-shadow:inset 0 2px 2px -1px #0000001f;padding:20px 30px 0 52px;box-sizing:border-box;flex:1}.app-appointment-left-side-bar__box--content__title[_ngcontent-%COMP%]{font-size:11px;line-height:16px;letter-spacing:.8px;color:#3c4043;font-weight:500}.app-appointment-left-side-bar__box--content__sub-title[_ngcontent-%COMP%]{line-height:16px;color:#5f6368;font-size:12px;letter-spacing:.3px;padding-bottom:4px;margin-top:-10px}.app-appointment-left-side-bar__box--content[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.app-appointment-left-side-bar__box--content[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]{width:120px;padding:4px 14px;border-radius:4px;box-sizing:border-box;transition:background-color .3s;font-size:14px}.app-appointment-left-side-bar__box--content[_ngcontent-%COMP%]   mat-select[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.app-appointment-left-side-bar__box--content__date[_ngcontent-%COMP%]{display:flex;align-items:center}.app-appointment-left-side-bar__box--content__date[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:56px;margin:0 8px;min-width:unset;--mat-form-field-container-text-size: 14px}.app-appointment-left-side-bar__box--content__date[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]:nth-child(1){width:100px}.app-appointment-left-side-bar__box--footer[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse;padding:10px}"]})}return n})();var L=p(6676);let N=(()=>{class n{constructor(){this.date=L()}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment-header"]],decls:4,vars:1,consts:[[1,"app-appointment-header"],[1,"app-appointment-header__left"],[1,"app-appointment-header__left--date"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._uU(3),t.qZA()()()),2&e&&(t.xp6(3),t.hij(" ",a.date.format("MMM YYYY")," "))},styles:[".app-appointment-header[_ngcontent-%COMP%]{padding:8px;width:100%;border-bottom:rgb(218,220,224) 1px solid;display:flex;justify-content:space-between;position:fixed;top:0;height:56px;box-sizing:border-box}.app-appointment-header__left[_ngcontent-%COMP%]{display:flex;align-items:center}.app-appointment-header__left--date[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:22px;line-height:24px;color:#3c4043;padding-left:40px}"]})}return n})(),O=(()=>{class n{constructor(){}static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-appointment"]],decls:6,vars:0,consts:[[1,"app-appointment"],[1,"app-appointment__left"],[1,"app-appointment__right"]],template:function(e,a){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t._UZ(2,"app-appointment-left-side-bar"),t.qZA(),t.TgZ(3,"div",2),t._UZ(4,"app-appointment-header")(5,"app-dashboard-week-view"),t.qZA()())},dependencies:[Z.I,B,N],styles:[".app-appointment[_ngcontent-%COMP%]{display:flex;height:100vh}.app-appointment__left[_ngcontent-%COMP%]{width:448px}.app-appointment__right[_ngcontent-%COMP%]{flex:1;padding-top:56px}"]})}return n})();const z=[{path:"",component:O},{path:":id",component:O}];let k=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[u.Bz.forChild(z),u.Bz]})}return n})();var F=p(2422);let I=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[x.ez,F.G,k]})}return n})()}}]);